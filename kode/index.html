<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Utstyrsliste</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Utstyrsliste</h1>
        <p>Her kan du holde styr p친 utstyret ditt og registrere hvem som l친ner det, samt markere 칮delagt utstyr.</p>
        
        <h2>Legg til nytt utstyr</h2>
        <input type="text" id="nyttUtstyr" placeholder="Navn p친 utstyr">
        <button onclick="leggTilUtstyr()">Legg til</button>
        <p id="feilmelding" class="feilmelding"></p>

        <h3>Utstyrsliste</h3>
        <ul id="utstyrsliste"></ul>

        <h3>Registrer L친n</h3>
        <form id="l친neskjema" onsubmit="registrerL친n(event)">
            <label for="l친nerNavn">Navn p친 l친ner:</label>
            <input type="text" id="l친nerNavn" required>

            <label for="utstyrValg">Velg utstyr:</label>
            <select id="utstyrValg" required>
                <option value="" disabled selected>Velg utstyr</option>
            </select>

            <label for="l친neDato">L친nedato:</label>
            <input type="date" id="l친neDato" required>

            <label for="returDato">Retur dato:</label>
            <input type="date" id="returDato" required>

            <button type="submit">Registrer L친n</button>
        </form>

        <h3>Registrerte L친n</h3>
        <ul id="l친nteUtstyr"></ul>

        <h3>Registrer 칒delagt Utstyr</h3>
        <form id="칮delagtSkjema" onsubmit="registrer칒delagtUtstyr(event)">
            <label for="칮delagtUtstyrNavn">Navn p친 칮delagt utstyr:</label>
            <input type="text" id="칮delagtUtstyrNavn" required>

            <label for="칮delagtBeskrivelse">Beskrivelse:</label>
            <input type="text" id="칮delagtBeskrivelse" required>

            <button type="submit">Registrer 칒delagt Utstyr</button>
        </form>

        <h3>칒delagt Utstyr</h3>
        <ul id="칮delagtUtstyr"></ul>
    </div>

    <script>
        const forh친ndsdefinertUtstyr = [
            "Kamera", "Mikrofon", "Lysrigg", "Stativ", "Kabelsett"
        ];

        function lastInnUtstyr() {
            let liste = document.getElementById('utstyrsliste');
            liste.innerHTML = "";
            let utstyrValg = document.getElementById('utstyrValg');
            utstyrValg.innerHTML = "<option value='' disabled selected>Velg utstyr</option>";

            forh친ndsdefinertUtstyr.forEach(navn => {
                leggTilUtstyr(navn, false);
                let option = document.createElement('option');
                option.value = navn;
                option.textContent = navn;
                utstyrValg.appendChild(option);
            });
        }

        function leggTilUtstyr(navn = null, sjekkInput = true) {
            let inputFelt = document.getElementById('nyttUtstyr');
            let feilmelding = document.getElementById('feilmelding');

            if (!navn) navn = inputFelt.value.trim();

            if (sjekkInput) {
                if (navn === "") {
                    feilmelding.textContent = "Vennligst skriv inn et navn.";
                    return;
                } else if (/\d/.test(navn)) {
                    feilmelding.textContent = "Ukjent utstyr.";
                    return;
                }
            }

            let liste = document.getElementById('utstyrsliste');
            let nyttElement = document.createElement('li');
            nyttElement.className = 'utstyr';
            nyttElement.dataset.status = "tilgjengelig";
            nyttElement.innerHTML = `
                <span class="utstyr-navn">${navn}</span>
                <button class="status-btn" onclick="endreStatus(this)">Tilgjengelig</button>
                <button class="delete-btn" onclick="slettUtstyr(this)">游딈</button>`;
            liste.appendChild(nyttElement);

            inputFelt.value = "";
            feilmelding.textContent = "";
        }

        function endreStatus(button) {
            let utstyr = button.parentElement;
            if (utstyr.dataset.status === "tilgjengelig") {
                utstyr.dataset.status = "utleid";
                utstyr.classList.add('utleid');
                button.classList.add('utleid-btn');
                button.textContent = "Utleid";
            } else {
                utstyr.dataset.status = "tilgjengelig";
                utstyr.classList.remove('utleid');
                button.classList.remove('utleid-btn');
                button.textContent = "Tilgjengelig";
            }
        }

        function registrerL친n(event) {
            event.preventDefault();

            let l친nerNavn = document.getElementById('l친nerNavn').value.trim();
            let valgtUtstyr = document.getElementById('utstyrValg').value;
            let l친neDato = document.getElementById('l친neDato').value;
            let returDato = document.getElementById('returDato').value;

            if (l친nerNavn && valgtUtstyr && l친neDato && returDato) {
                let liste = document.getElementById('l친nteUtstyr');
                let nyttL친n = document.createElement('li');
                nyttL친n.innerHTML = `${l친nerNavn} l친ner "${valgtUtstyr}" fra ${l친neDato} til ${returDato}.`;
                liste.appendChild(nyttL친n);

                // Fjern l친neinformasjon etter registrering
                document.getElementById('l친neskjema').reset();
            }
        }

        function slettUtstyr(button) {
            button.parentElement.remove();
        }

        function registrer칒delagtUtstyr(event) {
            event.preventDefault();

            let 칮delagtUtstyrNavn = document.getElementById('칮delagtUtstyrNavn').value.trim();
            let 칮delagtBeskrivelse = document.getElementById('칮delagtBeskrivelse').value.trim();

            if (칮delagtUtstyrNavn && 칮delagtBeskrivelse) {
                let liste = document.getElementById('칮delagtUtstyr');
                let 칮delagtElement = document.createElement('li');
                칮delagtElement.innerHTML = `<strong>${칮delagtUtstyrNavn}</strong> - ${칮delagtBeskrivelse}`;
                liste.appendChild(칮delagtElement);

                // Fjern 칮delagt utstyr informasjon etter registrering
                document.getElementById('칮delagtSkjema').reset();
            }
        }

        window.onload = lastInnUtstyr;
    </script>
</body>
</html>
